

1. Функциональные требования (Functional Requirements, FR)
Функциональные требования описывают, что система должна делать.

FR1: Управление пользователями (User Management)

FR1.1: Регистрация нового пользователя (через email/телефон или OAuth).

FR1.2: Аутентификация и авторизация пользователя.

FR1.3: Просмотр и редактирование профиля пользователя (аватар, имя, краткая биография).

FR1.4: Поиск пользователей по имени/никнейму.

FR2: Управление постами (Post Management)

FR2.1: Создание поста с обязательными полями: одна или несколько фотографий, текст описания, геометка (координаты или выбор из предложенных системой мест).

FR2.2: Редактирование и удаление собственного поста.

FR2.3: Просмотр страницы отдельного поста со всей информацией.

FR2.4: Просмотр всех постов конкретного пользователя (лента пользователя).

FR3: Социальные взаимодействия (Social Interactions)

FR3.1: Подписка на другого пользователя (follow/unfollow).

FR3.2: Постановка лайка/оценки посту (like/unlike).

FR3.3: Написание комментария к посту.

FR3.4: Удаление собственного комментария.

FR3.5: Просмотр списка подписчиков и списка тех, на кого подписан пользователь.

FR4: Ленты (Feeds)

FR4.1: Формирование и отображение персональной ленты пользователя, состоящей из постов всех авторов, на которых он подписан, в обратном хронологическом порядке.

FR4.2: Формирование и отображение "глобальной" или "популярной" ленты (по умолчанию или по выбору).

FR5: Поиск и Discovery (Search & Discovery)

FR5.1: Поиск постов по геометке (месту). Просмотр страницы места со статистикой (количество постов) и списком всех постов с этой меткой.

FR5.2: Поиск популярных/трендовых мест для путешествий (на основе количества постов/лайков за период).

FR5.3: Рекомендация пользователей для подписки (например, на основе общих мест).

2. Нефункциональные требования (Non-Functional Requirements, NFR)
Нефункциональные требования описывают, как система должна работать.

NFR1: Производительность и Масштабируемость (Performance & Scalability)

NFR1.1: Задержка (latency) отклика API для 95% запросов должна быть < 200 мс.

NFR1.2: Время загрузки ленты и постов на мобильном устройстве при стабильном 4G соединении < 2 сек.

NFR1.3: Система должна быть спроектирована для горизонтального масштабирования, чтобы выдерживать линейный рост пользовательской базы до 10M+ DAU и beyond.

NFR2: Надежность и Доступность (Reliability & Availability)

NFR2.1: Доступность (uptime) сервиса ≥ 99.9% (что позволяет примерно 8 часов 45 минут простоя в год).

NFR2.2: Отказоустойчивость: выход из строя одного из компонентов (ноды, базы данных) не должен приводить к полной недоступности сервиса.

NFR2.3: Система должна иметь план резервного копирования и восстановления данных (RTO < 1 часа, RPO < 5 минут).

NFR3: Мобильность и UX (Mobility & User Experience)

NFR3.1: Веб-интерфейс должен быть адаптивным и корректно отображаться на мобильных устройствах ( Progressive Web App - хороший вариант).

NFR3.2: Предполагается разработка нативных мобильных приложений для iOS и Android в будущем, архитектура API должна это учитывать (REST/GraphQL).

NFR4: Безопасность (Security)

NFR4.1: Все данные должны передаваться по защищенному протоколу (HTTPS/TLS).

NFR4.2: Пароли пользователей должны храниться в хешированном виде (с использованием salt).

NFR4.3: Защита от основных уязвимостей (OWASP Top 10), таких как SQL-injection, XSS, CSRF.

NFR5: Расположение данных (Data Locality)

NFR5.1: Так как целевая аудитория - СНГ, все сервера (application, database, storage) должны быть расположены в дата-центрах с низким пингом к этому региону (например, в России, Казахстане, Нидерландах для охвата западной части СНГ).

3. Оценка нагрузки (Load Estimation)
Исходные данные:

DAU (Daily Active Users) = 10 000 000

Будем считать, что активный пользователь заходит в приложение 3 раза в день и совершает за день 20 различных действий (чтение ленты - это одно "действие", несмотря на то, что под капотом это десятки запросов).

Общий подход:

RPS (Requests Per Second): Считаем пиковую нагрузку. Обычно пик длится ~4 часа в день.

Пиковый коэффициент: допустим, в пике нагрузка в 3 раза выше средней.

Общее количество действий в день: 10M users * 20 actions = 200M actions/day

Средний RPS: 200M / 86400 sec ≈ 2315 RPS

Пиковый RPS: 2315 * 3 ≈ 7000 RPS (это общий RPS на всю систему)

Теперь разобьем на подсистемы. Допустим, распределение действий такое:

Чтение ленты/постов (80% действий): 16 действий на пользователя

Социальные действия (15%): 3 действия (лайк, комментарий, подписка)

Публикация постов (5%): 1 действие

Подсистема 1: Чтение (Read Feed & Posts)

Действий в день: 10M * 16 = 160M

Пиковый RPS: (160M / 86400) * 3 ≈ 5550 RPS

Трафик: Допустим, один пост – это 300 Кб данных (сжатые картинки + текст + метаданные). При открытии ленты пользователь получает 10-15 постов. Но система умная, может отдавать превью.

Оценим на 1 действие чтения: ~2 Мб исходящего трафика.

Исходящий трафик в пик: 5550 RPS * 2 MB ≈ 11.1 GB/s (гигабайт в секунду!). Это огромная цифра, требующая мощного CDN и кэширования.

Подсистема 2: Социальные действия (Write: Likes, Comments, Follows)

Действий в день: 10M * 3 = 30M

Пиковый RPS: (30M / 86400) * 3 ≈ 1040 RPS (запросов на запись)

Трафик: Незначительный, сами операции легковесны (несколько килобайт). Основная нагрузка – на базы данных.

Подсистема 3: Публикация постов (Write: Post Creation)

Действий в день: 10M * 1 = 10M

Пиковый RPS: (10M / 86400) * 3 ≈ 347 RPS

Трафик (Входящий): Это самая "тяжелая" операция. Пользователь загружает фото. Допустим, средний размер поста с фото – 3 MB.

Входящий трафик в пик: 347 RPS * 3 MB ≈ 1.04 GB/s. Это также требует мощных серверов загрузки и быстрого uplink.

Итоговая оценка нагрузки:

Подсистема	Тип нагрузки	Пиковый RPS	Трафик (пиковый)	Ключевые технологии для решения
Чтение (лента)	Read	~5500 RPS	~11 GB/s (исходящий)	CDN, Кэширование (Redis), Шардирование БД (чтение)
Реакции/Соц.	Write	~1000 RPS	Незначительный	NoSQL БД (Cassandra/Scylla), Message Queues (Kafka/RabbitMQ)
Публикация	Write	~350 RPS	~1 GB/s (входящий)	Объектное хранилище (S3), Message Queues, Очереди обработки медиа (Resize)
Поиск/Места	Read	(часть от 5500 RPS)	(часть от 11 GB/s)	Отдельный поисковый движок (Elasticsearch)
Вывод: Нагрузка на систему является высокой и крайне асимметричной: операции чтения преобладают над операциями записи как по RPS, так и по объему трафика. Это классический кейс для использования мощных систем кэширования, CDN для раздачи медиаконтента и шардированных баз данных, оптимизированных под чтение.
